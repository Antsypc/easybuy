<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.gentlemen.easybuy.dao.OrdersDao">

    <!-- 通过 username 获得该用户已下单的货物 -->
    <select id="getOrdersByUsername" resultType="com.gentlemen.easybuy.entity.Orders">
        SELECT * FROM orders WHERE username = #{username} and state = 1;
    </select>

    <!-- 通过 username 获取该用户待付款的订单，即购物车中的货物 -->
    <select id="getCartByUsername" resultType="com.gentlemen.easybuy.entity.Orders">
        SELECT *
        FROM orders
        WHERE username = #{username} and state = 0;
    </select>


    <update id="cancelOrder">
        UPDATE orders
        SET state = -1
        <where>
            username = #{username}
            <if test="ordersId != 0">
                and id = #{ordersId}
            </if>
        </where>
    </update>


</mapper>
